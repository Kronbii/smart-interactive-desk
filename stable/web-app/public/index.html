<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Table Control Panel</title>
  <style>
    /* Global Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e1e1e 0%, #121212 100%);
      color: #e0e0e0;
      padding-top: 60px;
      overflow-y: auto;
    }
    body.light-mode { background: #f0f0f0; color: #000; }
    body.light-mode #navbar { background: #ddd; }
    body.light-mode .panel, body.light-mode .gameBox, body.light-mode #overviewPage, body.light-mode #statusPage, body.light-mode #aboutPage { background: #fff; color: #000; }
    body.crazy-mode h1::after { content: " You absolute table-flop!"; color: #ff4d4d; }

    /* Navbar */
    #navbar {
      position: fixed; top: 0; left: 0; width: 100%; height: 60px;
      background: rgba(30,30,30,0.95);
      display: flex; justify-content: center; align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.7);
      z-index: 1000;
    }
    #navbar ul { list-style: none; display: flex; }
    #navbar li {
      margin: 0 20px; cursor: pointer; position: relative;
      font-size: 1.1em;
      transition: color 0.2s;
    }
    #navbar li:hover { color: #FFD700; }
    /* Dropdown */
    #settingsMenu {
      display: none; position: absolute; top: 100%; left: 0;
      background: #333; border-radius: 4px; overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.7);
    }
    #settingsMenu li { padding: 8px 16px; white-space: nowrap; }
    #settingsMenu li:hover { background: #444; }

    /* Pages */
    .page { display: none; padding: 20px; }
    .active { display: block; }

    /* Headings */
    h1 {
      text-align: center;
      margin: 30px 0;
      font-size: 2.5em;
      color: #FFD700;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      animation: pulse 3s ease-in-out infinite;
    }
    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    /* Table Simulation */
    #tableSimulationWrapper {
      position: relative;
      width: 240px; height: 12px;
      margin: 0 auto 40px;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    #tableBase { background: #555; width: 100%; height: 100%; }
    #tableTop { 
      background: linear-gradient(90deg, #666, #444);
      width: 100%; height: 100%; position: absolute; top: 0; left: 0;
      transition: transform 0.15s;
    }

    /* Panels */
    .panel {
      background: rgba(30,30,30,0.9);
      border-radius: 8px;
      padding: 20px;
      margin: 20px auto;
      max-width: 500px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    }
    .panel button {
      margin: 10px 5px;
      padding: 12px 24px;
      background: #333;
      border: none;
      border-radius: 4px;
      color: #e0e0e0;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
    }
    .panel button:hover { background: #444; transform: scale(1.05); }

    /* Stats */
    #stats { width: 100%; }
    #stats p { margin: 10px 0; font-size: 1.1em; }

    /* Games Section */
    #gamesPanel {
      background: rgba(30,30,30,0.9);
      border-radius: 8px;
      padding: 40px;
      margin: 20px auto;
      max-width: 1000px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    }
    #interactiveSection { display: flex; justify-content: space-between; }
    .gameBox {
      background: #222;
      border-radius: 8px;
      padding: 20px;
      width: 300px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      transition: transform 0.2s;
    }
    .gameBox:hover { transform: translateY(-5px); }
    .gameBox h2 { color: #FFD700; margin-bottom: 15px; }
    .gameBtn { margin-top: 15px; }
    canvas { background: #111; border: 2px solid #444; border-radius: 6px; }

    /* About & Status */
    #aboutPage, #statusPage, #overviewPage {
      background: rgba(30,30,30,0.9);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    }
    #statusContent { max-height: 600px; overflow-y: auto; padding: 10px; margin-bottom: 20px; }

    /* Overview & Buttons */
    .idcBtn, #backBtn {
      padding: 14px 28px; font-size: 1.1em; border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5); transition: background 0.2s;
    }
    .idcBtn:hover, #backBtn:hover { background: #555; }
  </style>
</head>
<body>
  <nav id="navbar">
    <ul>
      <li id="nav-overview">Overview</li>
      <li id="nav-status">Status</li>
      <li id="nav-settings">Settings
        <ul id="settingsMenu">
          <li id="mode-light">Light Mode</li>
          <li id="mode-dark">Dark Mode</li>
          <li id="mode-crazy">Crazy Mode</li>
        </ul>
      </li>
      <li id="nav-stats">Controls</li>
      <li id="nav-about">About Table</li>
    </ul>
  </nav>

  <!-- Overview Page -->
  <div id="overviewPage" class="page">
    <h1>Overview of Smart Table Control Panel</h1>
    <p>This interface allows you to:</p>
    <ul>
      <li>Adjust table <strong>Height</strong> between 75–120 cm</li>
      <li>Control table <strong>Tilt</strong> between 0–35°</li>
      <li>Monitor <strong>Live Sensor Stats</strong> (noise, power, posture, etc.)</li>
      <li>Play four table-themed mini-games:</li>
      <ol>
        <li><strong>Table Pac‑Man</strong> – collect dots with the table icon.</li>
        <li><strong>Height Match</strong> – match a random target height.</li>
        <li><strong>Tilt Balance</strong> – bring tilt to zero quickly.</li>
        <li><strong>Table Snake</strong> – avoid self-collision.</li>
      </ol>
    </ul>
    <button class="idcBtn" onclick="showPage('mainContent')">Go to Controls</button>
  </div>

  <!-- Status Page -->
  <div id="statusPage" class="page">
    <h1>Status: A Table's Existential Crisis</h1>
    <div id="statusContent"></div>
    <button class="idcBtn" onclick="showPage('mainContent')">idc</button>
  </div>

  <!-- Control Panel Page -->
  <div id="mainContent" class="page active">
    <h1>Smart Table Control Panel</h1>
    <div id="tableSimulationWrapper">
      <div id="tableBase"></div>
      <div id="tableTop"></div>
    </div>
    <div class="panel" id="buttonContainer">
      <button id="upBtn">Up</button>
      <button id="downBtn">Down</button>
      <button id="tiltUpBtn">Tilt Up</button>
      <button id="tiltDownBtn">Tilt Down</button>
    </div>
    <div id="gamesPanel">
      <div id="interactiveSection">
        <div>
          <div class="gameBox">
            <h2>Table Pac‑Man</h2>
            <canvas id="pacCanvas" width="300" height="300"></canvas>
            <div>Score: <span id="pacScore">0</span></div>
            <button id="startPac" class="gameBtn">Start Pac‑Man</button>
          </div>
          <div class="gameBox">
            <h2>Height Match</h2>
            <p>Target: <span id="targetHeight">--</span> cm</p>
            <button id="newTargetHeight" class="gameBtn">New Target</button>
            <button id="checkHeight" class="gameBtn">Check</button>
            <p id="heightResult"></p>
          </div>
        </div>
        <div class="panel" id="stats">
          <p>Height: <span id="heightValue">100</span> cm</p>
          <p>Tilt: <span id="tiltValue">0</span>°</p>
          <p>Noise: <span id="noiseValue">40</span> dB</p>
          <p>Power: <span id="powerValue">150</span> W</p>
          <p>Tables: <span id="tablesValue">2</span></p>
          <p>Posture: <span id="postureValue">Good</span></p>
          <p>Network: <span id="networkValue">Connected</span></p>
          <p>Firmware: <span id="firmwareValue">v1.2.3</span></p>
          <p>USB: <span id="usbValue">4</span></p>
          <p>Light: <span id="lightValue">300</span> lx</p>
          <p>Temp: <span id="tempValue">22.0</span>°C</p>
          <p>Load: <span id="weightValue">15.0</span> kg</p>
        </div>
        <div>
          <div class="gameBox">
            <h2>Tilt Balance</h2>
            <p>Adjust tilt to 0°</p>
            <button id="startBalance" class="gameBtn">Start</button>
            <button id="checkBalance" class="gameBtn">Check</button>
            <p>Time: <span id="balanceTime">0.00</span> s</p>
            <p id="tiltResult"></p>
          </div>
          <div class="gameBox">
            <h2>Table Snake</h2>
            <canvas id="snakeCanvas" width="300" height="300"></canvas>
            <div>Score: <span id="snakeScore">0</span></div>
            <button id="startSnake" class="gameBtn">Start Snake</button>
            <p>Use W/A/S/D to guide</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- About Page -->
  <div id="aboutPage" class="page">
    <h1>About Table</h1>
    <img src="rami.jpeg" alt="Rami" class="about-img">
    <img src="layth.jpeg" alt="Layth" class="about-img">
    <p>Created by Rami and Layth. Simulates table controls and features fun table-themed games.</p>
    <button id="backBtn">Go Back</button>
  </div>

  <script>
    // Settings dropdown
    document.getElementById('nav-settings').onclick = () => {
      const menu = document.getElementById('settingsMenu');
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    };
    document.getElementById('mode-light').onclick = () => document.body.className = 'light-mode';
    document.getElementById('mode-dark').onclick = () => document.body.className = '';
    document.getElementById('mode-crazy').onclick = () => document.body.className = 'crazy-mode';

    // Navigation handler
    function showPage(id) {
      ['overviewPage','statusPage','mainContent','aboutPage'].forEach(pid => {
        document.getElementById(pid).classList.toggle('active', pid === id);
      });
    }
    document.getElementById('nav-overview').onclick = () => showPage('overviewPage');
    document.getElementById('nav-status').onclick = () => showPage('statusPage');
    document.getElementById('nav-stats').onclick = () => { alert('no one has any control but Allah'); showPage('mainContent'); };
    document.getElementById('nav-about').onclick = () => showPage('aboutPage');
    document.querySelectorAll('.idcBtn, #backBtn').forEach(btn => btn.onclick = () => showPage('mainContent'));

    // Prevent arrow keys scrolling
    window.addEventListener('keydown', e => {
      if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d'].includes(e.key)) e.preventDefault();
    });

    // Table controls logic
    let height=100, tilt=0;
    const stats={noise:40,power:150,tables:2,posture:true,ambientLight:300,ambientTemp:22,loadWeight:15};
    const clamp=(v,m,M)=>Math.max(m,Math.min(M,v));
    function updateStats(){
      stats.noise = clamp(stats.noise + (Math.random()-0.5)*3, 30,80).toFixed(1);
      stats.power = (140 + Math.random()*20).toFixed(1);
      stats.tables = Math.random()>0.5?2:3;
      stats.posture = Math.random()>0.3;
      stats.ambientLight = clamp(stats.ambientLight+(Math.random()-0.5)*20,100,600).toFixed(0);
      stats.ambientTemp = clamp(stats.ambientTemp+(Math.random()-0.5)*0.4,18,28).toFixed(1);
      stats.loadWeight = clamp(stats.loadWeight+(Math.random()-0.5)*0.05,14.87,15.12).toFixed(2);
      document.getElementById('heightValue').innerText = height;
      document.getElementById('tiltValue').innerText = tilt;
      document.getElementById('noiseValue').innerText = stats.noise;
      document.getElementById('powerValue').innerText = stats.power;
      document.getElementById('tablesValue').innerText = stats.tables;
      document.getElementById('postureValue').innerText = stats.posture?'Good':'Slouch';
      document.getElementById('networkValue').innerText = 'Connected';
      document.getElementById('firmwareValue').innerText = 'v1.2.3';
      document.getElementById('usbValue').innerText = '4';
      document.getElementById('lightValue').innerText = stats.ambientLight;
      document.getElementById('tempValue').innerText = stats.ambientTemp;
      document.getElementById('weightValue').innerText = stats.loadWeight;
    }
    function updateTable(){
      const top = document.getElementById('tableTop');
      const offset = (height - 100) * 1.5;
      top.style.transform = `translateY(${-offset}px) rotate(${tilt}deg)`;
    }
    ['upBtn','downBtn','tiltUpBtn','tiltDownBtn'].forEach(id => {
      const codeMap = { upBtn:'u', downBtn:'d', tiltUpBtn:'tu', tiltDownBtn:'td' };
      const code = codeMap[id];
      const btn = document.getElementById(id);
      btn.onmousedown = () => {
        const step = () => {
          if(code==='u') height=clamp(height+1,75,120);
          if(code==='d') height=clamp(height-1,75,120);
          if(code==='tu') tilt=clamp(tilt+1,0,35);
          if(code==='td') tilt=clamp(tilt-1,0,35);
          updateStats(); updateTable();
        };
        step();
        window._hold = setInterval(step,150);
      };
      btn.onmouseup = btn.onmouseleave = () => clearInterval(window._hold);
    });
    updateStats(); updateTable();

    // Pac-Man game
    const pacCanvas = document.getElementById('pacCanvas'), pacCtx = pacCanvas.getContext('2d');
    const G={size:15,count:20};
    let pac, pacDots, pacScore=0, pacInt;
    function pacInit(){
      pac={x:10,y:10,dx:0,dy:0};
      pacDots=[]; for(let i=0;i<G.count;i++) for(let j=0;j<G.count;j++) if(i!==pac.x||j!==pac.y) pacDots.push({x:i,y:j});
      pacScore=0; document.getElementById('pacScore').innerText=pacScore;
      clearInterval(pacInt);
      pacInt = setInterval(pacLoop,200); pacDraw();
    }
    function pacDraw(){
      pacCtx.fillStyle='#000'; pacCtx.fillRect(0,0,300,300);
      pacDots.forEach(d=>{ pacCtx.fillStyle='#FFD700'; pacCtx.fillRect(d.x*G.size+6,d.y*G.size+6,G.size-12,G.size-12); });
      pacCtx.fillStyle='#8FBCD4'; pacCtx.fillRect(pac.x*G.size+2,pac.y*G.size+2,G.size-4,G.size-4);
    }
    function pacLoop(){
      pac.x=(pac.x+pac.dx+G.count)%G.count; pac.y=(pac.y+pac.dy+G.count)%G.count;
      pacDots = pacDots.filter(d=>{ if(d.x===pac.x && d.y===pac.y){ pacScore++; document.getElementById('pacScore').innerText=pacScore; return false;} return true; });
      pacDraw();
      if(pacDots.length===0) clearInterval(pacInt);
    }
    document.getElementById('startPac').onclick = pacInit;
    window.addEventListener('keydown', e=>{
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)){
        e.preventDefault();
        if(e.key==='ArrowUp'){pac.dx=0;pac.dy=-1;}
        if(e.key==='ArrowDown'){pac.dx=0;pac.dy=1;}
        if(e.key==='ArrowLeft'){pac.dx=-1;pac.dy=0;}
        if(e.key==='ArrowRight'){pac.dx=1;pac.dy=0;}
      }
    });

    // Height Match
    document.getElementById('newTargetHeight').onclick = ()=>{
      const tgt=Math.floor(Math.random()*(120-75+1))+75;
      document.getElementById('targetHeight').innerText=tgt;
    };
    document.getElementById('checkHeight').onclick = ()=>{
      const tgt=+document.getElementById('targetHeight').innerText;
      const diff=Math.abs(height-tgt);
      document.getElementById('heightResult').innerText = diff<=1?`Matched! (${height} cm)`: `Off by ${diff.toFixed(1)} cm`;
    };
    document.getElementById('newTargetHeight').click();

    // Tilt Balance
    let tStart=0;
    document.getElementById('startBalance').onclick = ()=>{ tStart=performance.now(); document.getElementById('tiltResult').innerText=''; };
    document.getElementById('checkBalance').onclick = ()=>{
      if(tilt===0){
        const elapsed=((performance.now()-tStart)/1000).toFixed(2);
        document.getElementById('balanceTime').innerText=elapsed;
        document.getElementById('tiltResult').innerText='Balanced!';
      } else document.getElementById('tiltResult').innerText='Not zero yet.';
    };

    // Snake Game
    const snakeCanvas = document.getElementById('snakeCanvas'), snakeCtx = snakeCanvas.getContext('2d');
    let snake, dir, apple, snakeInt;
    function placeApple(){ apple={x:Math.floor(Math.random()*G.count),y:Math.floor(Math.random()*G.count)}; }
    function snakeDraw(){
      snakeCtx.fillStyle='#000'; snakeCtx.fillRect(0,0,300,300);
      snakeCtx.fillStyle='#FFD700'; snakeCtx.fillRect(apple.x*G.size+6,apple.y*G.size+6,G.size-12,G.size-12);
      snakeCtx.fillStyle='#8FBCD4'; snake.forEach(s=>snakeCtx.fillRect(s.x*G.size+2,s.y*G.size+2,G.size-4,G.size-4));
    }
    function snakeLoop(){
      const head={x:(snake[0].x+dir.x+G.count)%G.count,y:(snake[0].y+dir.y+G.count)%G.count};
      if(snake.some(s=>s.x===head.x&&s.y===head.y)){ clearInterval(snakeInt); alert('Snake Game Over'); return; }
      snake.unshift(head);
      if(head.x===apple.x&&head.y===apple.y){ placeApple(); document.getElementById('snakeScore').innerText=snake.length-1; }
      else snake.pop();
      snakeDraw();
    }
    document.getElementById('startSnake').onclick = ()=>{
      snake=[{x:10,y:10}]; dir={x:1,y:0}; placeApple(); snakeDraw(); clearInterval(snakeInt);
      snakeInt=setInterval(snakeLoop,150);
    };
    window.addEventListener('keydown', e=>{
      if(['w','a','s','d'].includes(e.key.toLowerCase())){
        e.preventDefault();
        if(e.key==='w') dir={x:0,y:-1};
        if(e.key==='s') dir={x:0,y:1};
        if(e.key==='a') dir={x:-1,y:0};
        if(e.key==='d') dir={x:1,y:0};
      }
    });

    // Generate ~4000-word essay
    const longPara = `Once upon a day, perched in a modest living room, I–the humble table… `;
    let essayHTML='';
    for(let i=0;i<400;i++) essayHTML+=`<p>${longPara}</p>`;
    document.getElementById('statusContent').innerHTML=essayHTML;
  </script>
</body>
</html>